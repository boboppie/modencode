{% extends "layout.html" %}

{% block body %}

  <div class="form">
    <h3>Contact Us</h3>

    {% if message %}
    <p class="message {{ message.class }}">{{ message.text|safe }}</p>
    {% endif %}

    <form method="POST">
        <label for="name">Your name:</label>
        <input type="text" id="name" name="name" value="{{ request.form['name'] }}">

        <label for="email">Your e-mail</label>
        <input type="email" id="email" name="email" required="required" {% if fail.email %}class="fail" value="{{ fail.email -}}
        "{% else %}value="{{ request.form['email'] }}"{% endif %}>

        <label for="message">Your message:</label>
        <textarea id="message" name="message" required="required" {% if fail.email -%}
            class="fail">{{ fail.message }}{% else %}>{{ request.form['message'] }}{% endif %}</textarea>

        <div class="button">
            <input type="submit" value="Send">
        </div>
    </form>
  </div>

<script>
    // remove the fail msg and style onclick field
    $('div.form form .fail').click(function() {
        $(this).removeClass('fail');
        $(this).val('');
    });
</script>

{% endblock %}